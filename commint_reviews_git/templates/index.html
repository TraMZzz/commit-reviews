<!DOCTYPE html>
{% load static %}
<html lang="en" ng-app="commentApp">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Angular comment app</title>

    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/app.css' %}">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular-resource.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular-route.js"></script>
    <script type="text/javascript" src="{% static 'js/app.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/factorys.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/controllers.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/filters.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/directives.js' %}"></script>

  </head>
  <body >
  <div class="container">
  {% if not request.user.is_authenticated %}
    <a href="{% url 'social:begin' "github" %}">Log in git</a>
  {% else %}
    <div>Github project</div>
      <div ng-controller="FormController">
          <form name="myForm" ng-submit="submit(myForm.$valid, data)">
            <div >User:</div>
            <input type="text" name='first' ng-model="data.user" required />
            <input type="submit" value="Show">
          </form>
          <div ng-show='userprojects' ng-repeat="project in userprojects">
              <p><a ng-click="projectshow(project.url)" href="#">{[{project.name}]}</a></p>
              <p><a href="{[{project.clone_url}]}">Project on git</a></p>
              <p>Owner: <a ng-click="usershow(project.owner.url)" href="#">{[{project.owner.login}]}</a></p>
              <div ng-show='userproject'>
                <p>------------------------</p>
                <p>Created at {[{userproject.created_at}]}</p>
                <p>------------------------</p>
              </div>
              <div ng-show='commints'>
                <p>------------------------</p>
                <div ng-repeat="commint in commints">
                    <p>Commiter</p>
                    <p><a href="{[{commint.committer.html_url}]}"><img style='width:100px; height:100px' src="{[{commint.committer.avatar_url}]}"></a></p>
                    <p><a ng-click="usershow(commint.committer.url)" href="#">{[{commint.committer.login}]}</a></p>
                    <p>Commint</p>
                    <p>{[{commint.commit.message}]}</p>
                    <a href="{[{commint.html_url}]}">On git</a>
                    <a ng-click="commentsshow(commint.comments_url)"href="#">Show comments</a>
                    <div ng-show='comments'>
                      <div ng-repeat="comment in comments">
                          <p>------------------------</p>
                          <a href="{[{comment.html_url}]}">{[{comment.body}]}</a>
                          <p>Auvtor</p>
                          <p><a ng-click="usershow(comment.user.url)" href="#">{[{comment.user.login}]}</a></p>
                          <p>Created at {[{comment.created_at}]}</p>
                      </div>
                    </div>
                    <p>------------------------</p>
                </div>
                <p>------------------------</p>
              </div>
              <div ng-show='user'>
                  <p>------------------------</p>
                  <p><a href="{[{user.html_url}]}"><img style='width:100px; height:100px' src="{[{user.avatar_url}]}"></a></p>
                  <p>Created at {[{user.created_at}]}</p>
                  <p>------------------------</p>
              </div>
              <p>Project language: {[{project.language}]}</p>
              <p>Description: {[{project.description}]}</p>
              <p>------------------------</p>
          </div>
      </div>
    {% endif %}
    </div>
    <!--<div class='ng-view-div' ng-view></div>-->
  </div>
  </body>
</html>
